{"version":3,"sources":["../src/tabs.js"],"names":["define","$","init","insertTabIndex","element","tabtabindex","attr","each","tabnav","document","keyup","e","code","keyCode","which","focused","indexOf","click","find","add2tab","tabnum","sectionid","sectionnum","replace","length","save2tab","tabid","courseid","ajax","url","type","data","success","result","set_numsections_cookie","on","numSections","sessionStorage","setItem","escapeHtml","text","map","m","truncateTabname","tab","x","orig_tab_title","short_tab_title","substr","String","fromCharCode","hasClass","html","truncateAllTabnames","expandTabname","dataValue","changeTab","target","console","log","orig_sectionname","theSectionname","parent","append","clone","addClass","hide","new_sectionname","restoreTab","the_backup","the_tab","removeClass","remove","tabClick","sections","sectionArray","split","clickedTabName","show","index","value","visibleSections","hiddenSections","visibleBlocks","visibleAssessmentInfo","genericTitle","initFunctions","first","firstSectionId","showTabHint","hideTabHint","require","str","get_the_string","get_string","when","done","theString","theAppendix","tabMove","closest","substring","activeTabId","visibleTabs","fadeOut","fadeIn","countable_sections","moveOntop","currenttab","moveInline","dropdownToggle","tabArray","trackIds","tabname","inArray","trim","push","tabnr","toggleAvailiability","activeTab","handleTabDropEvent","event","ui","dragged_tab","draggable","target_tab","dragged_tab_id","target_tab_id","zwischenspeicher","tabSeq","concat","foundIt","ready","cursor","stack","revert","droppable","accept","hoverClass","drop","originCourseid","getItem","removeItem","i"],"mappings":"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","sourcesContent":["define(['jquery', 'jqueryui'], function($) {\n    /*eslint no-console: [\"error\", { allow: [\"log\", \"warn\", \"error\"] }] */\n    return {\n        init: function() {\n// ---------------------------------------------------------------------------------------------------------------------\n            function insertTabIndex(element) {\n                // Inserts the tabindex from any active tab to its visible sections to make sure they will follow\n                // directly after the tab when navigating using the TAB key\n                var tabtabindex = element.attr('tabindex');\n                if (tabtabindex > 0) {\n                    $('.section.main:visible').each( function() {\n                        $(this).attr('tabindex',tabtabindex);\n                    });\n                }\n            }\n\n// ---------------------------------------------------------------------------------------------------------------------\n            function tabnav() {\n                // Supporting navigation using the keyboard\n                $(document).keyup(function(e) {\n                    var code = e.keyCode || e.which;\n                    var focused = $(':focus');\n                    // When using the TAB key to navigate the page actually click a tab when in focus to reveal its sections\n//                    if (code == '9') { // TAB key pressed\n//                        if ( typeof focused.attr('id') !== 'undefined' && focused.attr('id').indexOf(\"tab\") > -1) {\n//                            focused.click();\n//                        }\n//                    }\n                    if (code == 13) { // ENTER key pressed\n                        // Click a focused tab by pressing ENTER\n                        if ( typeof focused.attr('id') !== 'undefined' && focused.attr('id').indexOf(\"tab\") > -1) {\n                            focused.click();\n                        }\n                        // Toggle a focused section by pressing ENTER\n                        if ( typeof focused.attr('id') !== 'undefined' && focused.attr('id').indexOf(\"section\") > -1) {\n                            focused.find('.toggler:visible').click();\n                        }\n                    }\n                });\n            }\n\n// ---------------------------------------------------------------------------------------------------------------------\n            function add2tab(tabnum, sectionid, sectionnum) {\n                // Remove the section id and section number from any tab\n                $(\".tablink\").each(function() {\n                    $(this).attr('sections', $(this).attr('sections').replace(\",\" + sectionid, \"\"));\n                    $(this).attr('sections', $(this).attr('sections').replace(sectionid + \",\", \"\"));\n                    $(this).attr('sections', $(this).attr('sections').replace(sectionid, \"\"));\n\n                    $(this).attr('section_nums', $(this).attr('section_nums').replace(\",\" + sectionnum, \"\"));\n                    $(this).attr('section_nums', $(this).attr('section_nums').replace(sectionnum + \",\", \"\"));\n                    $(this).attr('section_nums', $(this).attr('section_nums').replace(sectionnum, \"\"));\n                });\n                // Add the sectionid to the new tab\n                if (tabnum > 0) { // No need to store section ids for tab 0\n                    if ($(\"#tab\" + tabnum).attr('sections').length === 0) {\n                        $(\"#tab\" + tabnum).attr('sections', $(\"#tab\" + tabnum).attr('sections') + sectionid);\n                    } else {\n                        $(\"#tab\" + tabnum).attr('sections', $(\"#tab\" + tabnum).attr('sections') + \",\" + sectionid);\n                    }\n                    if ($(\"#tab\" + tabnum).attr('section_nums').length === 0) {\n                        $(\"#tab\" + tabnum).attr('section_nums', $(\"#tab\" + tabnum).attr('section_nums') + sectionnum);\n                    } else {\n                        $(\"#tab\" + tabnum).attr('section_nums', $(\"#tab\" + tabnum).attr('section_nums') + \",\" + sectionnum);\n                        // X console.log('---> section_nums: '+$(\"#tab\"+tabnum).attr('section_nums'));\n                    }\n                }\n            }\n\n// ---------------------------------------------------------------------------------------------------------------------\n            function save2tab(tabid) {\n                // save the new tab data to the database\n                var courseid = $('#courseid').attr('courseid');\n                $.ajax({\n                    url: \"format/weeks2/ajax/update_tab_settings.php\",\n                    type: \"POST\",\n                    data: {\n                        'courseid': courseid,\n                        'tabid': tabid,\n                        'sections': $(\"#\" + tabid).attr('sections'),\n                        'sectionnums': $(\"#\" + tabid).attr('section_nums')\n                    },\n                    success: function(result) {\n                        if (result !== '') {\n                            // X console.log(result);\n                        }\n                    }\n                });\n            }\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var set_numsections_cookie = function() {\n                $('#changenumsections').on('click', function(){\n                    // store the number of current sections in a cookie - so we know how many have been added later\n                    var numSections = $('.section.main').length;\n                    sessionStorage.setItem('numSections', numSections);\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var escapeHtml = function(text) {\n                var map = {\n                    '&': '&amp;',\n                    '<': '&lt;',\n                    '>': '&gt;',\n                    '\"': '&quot;',\n                    \"'\": '&#039;'\n                };\n\n                return text.replace(/[&<>\"']/g, function(m) {\n                    return map[m];\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // When a limit for the tabname is set truncate the name of the given tab to limit\n            var truncateTabname = function(tab) {\n\n                if ($('.limittabname').length > 0) {\n                    var x = $('.limittabname').attr('value');\n                    var orig_tab_title = tab.attr('tab_title');\n                    if (orig_tab_title.length > x) {\n                        var short_tab_title = orig_tab_title.substr(0, x) + String.fromCharCode(8230);\n                        if (tab.hasClass('tabsectionname')) { // A sectionname as tabname\n                            tab.html(short_tab_title);\n                        } else {\n                            if ($('.inplaceeditingon').length === 0) { // Don't do this while editing the tab name\n                                if ($('.inplaceeditable').length > 0) { // We are in edit mode...\n                                    tab.find('a').html(tab.find('a').html().replace(escapeHtml(orig_tab_title), short_tab_title));\n                                } else {\n                                    tab.html(tab.html().replace(escapeHtml(orig_tab_title), short_tab_title));\n                                }\n                            }\n                        }\n                    }\n                }\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var truncateAllTabnames = function() {\n                if ($('.limittabname').length > 0) {\n                    $('.tablink').each(function() {\n                        truncateTabname($(this));\n                    });\n                }\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // When a limit for the tabname is set expand the name of the given tab to the original\n            var expandTabname = function(tab) {\n\n                if ($('.limittabname').length > 0) {\n                    var x = $('.limittabname').attr('value');\n                    var orig_tab_title = tab.attr('tab_title');\n                    // Console.log('expand => orig = ' + orig_tab_title);\n\n                    if (orig_tab_title.length > x) {\n                        var short_tab_title = orig_tab_title.substr(0, x) + String.fromCharCode(8230);\n                        // Console.log('       => short = ' + short_tab_title);\n                        if (tab.hasClass('tabsectionname')) { // A sectionname as tabname\n                            tab.html(orig_tab_title);\n                        } else {\n                            if ($('.inplaceeditingon').length === 0) { // Don't do this while editing the tab name\n                                if ($('.inplaceeditable').length > 0) { // We are in edit mode...\n\n                                    // Make sure that tab-tile matches data-value after the tab title was edited\n                                    var dataValue = tab.find('.inplaceeditable').attr('data-value');\n                                    if (orig_tab_title !== dataValue) { // They do NOT match so make them\n                                        tab.attr('tab_title', dataValue);\n                                        orig_tab_title = dataValue;\n                                        short_tab_title = orig_tab_title.substr(0, x) + String.fromCharCode(8230);\n                                    }\n\n                                    tab.find('a').html(tab.find('a').html().replace(escapeHtml(short_tab_title), orig_tab_title));\n                                } else {\n                                    tab.html(tab.html().replace(escapeHtml(short_tab_title), orig_tab_title));\n                                }\n                            }\n                        }\n                    }\n                }\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // When a single section is shown under a tab use the section name as tab name\n            var changeTab = function(tab, target) {\n                console.log('single section in tab: using section name as tab name');\n\n                // if the section is collapsed click it to un-collapse\n                target.find('.toggle_closed').click();\n\n                // Replace the tab name with the section name\n                var orig_sectionname=target.find('.sectionname:not(.hidden)');\n                if ($('.tabname_backup:visible').length > -1) {\n                    var theSectionname = target.attr('aria-label');\n                    tab.parent().append(tab.clone().addClass('tabname_backup').hide()); // Create a hidden clone of tab name\n                    tab.html(theSectionname).addClass('tabsectionname');\n\n                    // Hide the original sectionname when not in edit mode\n                    if ($('.inplaceeditable').length === 0) {\n                        orig_sectionname.hide();\n                        target.find('.sectionhead').hide();\n                    } else {\n                        orig_sectionname.addClass('edit_only');\n                        target.find('.hidden.sectionname').hide();\n                        target.find('.section-handle').hide();\n                    }\n                }\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // A section name is updated...\n            $(\".section\").on('updated', function() {\n                var new_sectionname = $(this).find('.inplaceeditable').attr('data-value');\n                $(this).attr('aria-label', new_sectionname);\n                $('.tablink.active').click();\n            });\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // Restore the tab name\n            var restoreTab = function(tab) {\n                // restore the tab name from the backup\n                var the_backup = tab.parent().find('.tabname_backup');\n                var the_tab = tab.parent().find('.tabsectionname').removeClass('tabsectionname');\n                the_tab.html(the_backup.html());\n                the_backup.remove();\n\n                // reveal the original sectionname\n//                $('.sectionname').removeClass('edit_only');\n//                $('.sectionname').show();\n//                $('.sectionhead').show();\n//                $('.hidden.sectionname').show();\n//                $('.section-handle').show();\n\n                console.log('--> restoring section headline ');\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // React to a clicked tab\n            var tabClick = function() {$(\".tablink\").on('click', function() {\n                var courseid = $('#courseid').attr('courseid');\n                var tabid = $(this).attr('id');\n                var sections = $(this).attr('sections');\n                var sectionArray = sections.split(\",\");\n\n                // Make this an active tab\n                $(\".tablink.active\").removeClass(\"active\"); // First remove any active class from tabs\n                $(this).addClass('active'); // Then add the active class to the clicked tab\n\n                // store the course ID and the ID of the active tab in cookies\n                sessionStorage.setItem('courseid', courseid);\n                sessionStorage.setItem('tabid', tabid);\n\n                // If the tab titles are limited - limit them and expand only the active\n                if ($('.limittabname').length > 0) {\n                    truncateAllTabnames();\n                    expandTabname($(this));\n                }\n\n                var clickedTabName;\n                if ($(this).find('.inplaceeditable-text')) {\n                    clickedTabName = $(this).find('.inplaceeditable-text').attr('data-value');\n                }\n                if (typeof clickedTabName == 'undefined') {\n                    clickedTabName = $(this).html();\n                }\n                console.log('=====> Clicked tab \"' + clickedTabName + '\":');\n\n                // Hide the content of the assessment info block tabs\n                $('#content_assessmentinformation_area').hide();\n                $('#assessment_information_summary').hide();\n                $('#assessment_information_area').hide();\n\n                $(\".tablink.active\").removeClass(\"active\");\n                $(\".modulecontent\").addClass(\"active\");\n\n                $('#content_assessmentinformation_area').hide();\n\n                if (tabid === 'tab0') { // Show all sections - then hide each section shown in other tabs\n                    $(\"#changenumsections\").show();\n                    $(\"li.section\").show();\n                    $(\".topictab:visible\").each(function() {\n                        if ($(this).attr('sections').length > 0) {\n                            // If any split sections into an array, loop through it and hide section with the found ID\n                            $.each($(this).attr('sections').split(\",\"), function(index, value) {\n                                var target = $(\".section[section-id='\" + value + \"']\");\n                                target.hide();\n                                console.log(\"--> hiding section \" + value);\n                            });\n                        }\n                    });\n                } else if (tabid === 'tab_assessment_information') { // Show the Assessment Information as new tab\n//                    console.log('Assessment Info tab clicked!');\n                    $(\"li.section\").hide();\n                    $(\"li.section.hidden\").addClass(\"hiding\");\n                    $(\"li.section.hiding\").removeClass(\"hidden\");\n\n                    $('#content_assessmentinformation_area').show();\n                    if ($('.merge_assessment_info').length > 0) {\n//                        console.log('merging Assessment Info Block');\n                        $('#assessment_information_summary').show();\n                        $('#assessment_information_area').show();\n                    }\n                } else if (tabid === 'tab_assessment_info_block') { // Show the Assessment Info Block on the main stage\n//                    console.log('Assessment Info Block tab clicked!');\n                    // Here comes a bit of hacking in course of replacing the old Assessment Information with the new one\n                    // provided by the Assessment Information block\n                    // If the new Assessment Information block has just been installed to replace the deprecated Synergy variant\n                    // the tab is rendered but the block has not been recognised yet as it was not there when\n                    // the loading of this page begun - in this case we just reload the page again\n//                    if ($('.block_assessment_information').length < 1) {\n//                        window.location = window.location;\n//                    }\n\n                    $(\"li.section\").hide();\n                    $(\"#changenumsections\").hide();\n                    $(\"li.section.hidden\").addClass(\"hiding\");\n                    $(\"li.section.hiding\").removeClass(\"hidden\");\n\n//                    $('.assessment_info_block_content').show();\n                    $('#assessment_information_summary').show();\n                    $('#assessment_information_area').show();\n                } else { // Hide all sections - then show those found in sectionArray\n                    $(\"#changenumsections\").show();\n                    $(\"li.section\").hide();\n                    $.each(sectionArray, function(index, value) {\n                        var target = $(\".section[section-id='\" + value + \"']\");\n                        target.show();\n                        console.log(\"--> showing section \" + value);\n                    });\n                }\n\n                // Show section-0 always when it should be shown always\n                $('#ontop_area #section-0').show();\n\n                var visibleSections = $('li.section:visible').length;\n                var hiddenSections = $('li.section.hidden:visible').length;\n                var visibleBlocks = $('#modulecontent').find('.block:visible');\n                var visibleAssessmentInfo = $('#content_assessmentinformation_area:visible').length;\n\n                if ($('.section0_ontop').length > 0) {\n                    console.log('section0 is on top - so reducing the number of visible sections for this tab by 1');\n                    visibleSections--;\n                }\n                console.log('number of visible sections: ' + visibleSections);\n                console.log('number of hidden sections: ' + hiddenSections);\n\n                if (visibleSections < 1 && visibleBlocks.length === 0 && visibleAssessmentInfo === 0) {\n                    console.log('tab with no visible sections - hiding it');\n                    $(this).parent().hide();\n\n                    // Restoring generic tab name\n                    var genericTitle = $(this).attr('generic_title');\n                    $.ajax({\n                        url: \"format/topics2/ajax/update_tab_name.php\",\n                        type: \"POST\",\n                        data: {'courseid': courseid, 'tabid': tabid, 'tab_name': genericTitle},\n                        success: function(result) {\n                            if (result !== '') {\n                                console.log('Reset name of tab ID ' + tabid + ' to \"' + result + '\"');\n                                $('[data-itemid=' + result + ']').attr('data-value', genericTitle).\n                                find('.quickeditlink').html(genericTitle);\n\n                                // Re-instantiate the just added DOM elements\n                                initFunctions();\n                            }\n                        }\n                    });\n                } else {\n                    console.log('tab with visible sections - showing it');\n                    $(this).parent().show();\n                }\n\n                // If option is set and when a tab other than tab 0 shows a single section perform some visual tricks\n                if ($('.single_section_tabs').length > 0\n                    && $(this).attr('sections').split(',').length == 1\n                    && tabid !== 'tab0') {\n                    var target = $('li.section:visible').first();\n//                    var target = $('li.section').first();\n//                    var target = $('li.section:eq(0)');\n                    // If section0 is shown always on top ignore the first visible section and use the 2nd\n                    if ($('.section0_ontop').length > 0) {\n//                        target = $('li.section:visible:not(.hidden):eq(1)');\n                        target = $('li.section:visible:eq(1)');\n//                        target = $('li.section:eq(1)');\n                    }\n                    var firstSectionId = target.attr('id');\n\n                    if (visibleSections - hiddenSections <= 1\n                        && firstSectionId !== 'section-0'\n                        && $(this).attr('generic_title').indexOf('Tab') >= 0 // Do this only for original tabs\n                    ) {\n                        changeTab($(this), target);\n                        // Make sure the content is un-hidden\n                        target.find('.toggle_area').removeClass('hidden').show();\n                    } else if ($('.inplaceeditable').length > 0 && firstSectionId !== 'section-0') {\n                        restoreTab($(this));\n                    }\n                }\n\n                // If all visible sections are hidden for students the tab is hidden for them as well\n                // in this case mark the tab for admins so they are aware\n                if (visibleSections <= hiddenSections && visibleBlocks.length === 0 && visibleAssessmentInfo === 0) {\n                    showTabHint($(this));\n                } else {\n                    hideTabHint($(this));\n                }\n\n                // If tab0 is alone hide it\n                if (tabid === 'tab0' && $('.tabitem:visible').length === 1) {\n                    // X console.log('--> tab0 is a single tab - hiding it');\n                    $('.tabitem').hide();\n                }\n                // this will make sure tab navigation goes from tab to its sections and then on to the next tab\n                insertTabIndex($(this));\n            });};\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var showTabHint = function(tab) {\n                var tabid = tab.attr('id');\n                tab.addClass('hidden-tab');\n\n                // Get the hint string and show the hint icon next to the tab name\n                require(['core/str'], function(str) {\n                    var get_the_string = str.get_string('hidden_tab_hint', 'format_qmultopics');\n                    $.when(get_the_string).done(function(theString) {\n                        tab.find('#not-shown-hint-'+tabid).remove();\n                        var theAppendix = '<i id=\"not-shown-hint-'+tabid+'\" class=\"fa fa-info\" title=\"'+theString+'\"></i>';\n                        if (tab.attr('sections').split(',').length == 1\n                            && $('.single_section_tabs').length > 0) { // If there is a single topic\n                            tab.html(tab.html() + ' ' +theAppendix);\n                        } else if ($('.tablink .fa-pencil').length > 0) { // When in edit mode ...\n                            tab.find('.inplaceeditable').append(theAppendix);\n                        } else {\n//                                self.append(theAppendix);\n                            tab.html(tab.html() + ' ' +theAppendix);\n                        }\n                    });\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var hideTabHint = function(tab) {\n                var tabid = tab.attr('id');\n                tab.removeClass('hidden-tab');\n                $('#not-shown-hint-'+tabid).remove();\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // Moving a section to a tab by menu\n            var tabMove = function () { $(\".tab_mover\").on('click', function() {\n                var tabnum = $(this).attr('tabnr'); // This is the tab number where the section is moved to\n                var sectionid = $(this).closest('li.section').attr('section-id');\n                var sectionnum = $(this).parent().parent().parent().parent().parent().parent().parent().attr('id').substring(8);\n                console.log('--> found section num: '+sectionnum);\n                var activeTabId = $('.topictab.active').first().attr('id');\n\n                if (typeof activeTabId == 'undefined') {\n                    activeTabId = 'tab0';\n                }\n                console.log('----');\n                console.log('moving section ' + sectionid + ' from tab \"' + activeTabId + '\" to tab nr '+tabnum);\n\n                add2tab(tabnum, sectionid, sectionnum);\n\n                $(\"#tab\" + tabnum).click();\n                $('#' + activeTabId).click();\n\n                // Restore the tab before moving it in case it was a single\n                restoreTab($('#tab'+tabnum));\n\n                // When there is no visible tab hide tab0 and show/click the module content tab\n                // and vice versa otherwise...\n                var visibleTabs = $(\".topictab:visible\").length;\n                console.log('visible tabs: '+visibleTabs);\n                if ($(\".topictab:visible\").length === 0) { // NO tabs present - showing original content module tab\n                    $(\"#tab0\").fadeOut(200);\n                    $(\".modulecontentlink\").fadeIn(1000); // Ta-daa\n                    $(\".modulecontentlink\").click(); // Activate tab by clicking on it\n                } else { // Tabs present - hide original content module tab\n                    $(\".modulecontentlink\").fadeOut(500);\n                    $(\"#tab0\").fadeIn(200);\n\n                    // If the last section of a tab was moved click the target tab\n                    // otherwise click the active tab to refresh it\n                    $('#' + activeTabId).click();\n                    var countable_sections = $('li.section:visible').length-($(\"#ontop_area\").hasClass('section0_ontop') ? 1 : 0);\n                    if (countable_sections > 0 && $('li.section:visible').length >= countable_sections) {\n                        console.log('staying with the current tab (id = '+activeTabId+\n                            ') as there are still ' + $('li.section:visible').length+' sections left');\n                        $(\"#tab\"+tabnum).click();\n                        $('#' + activeTabId).click();\n                    } else {\n                        console.log('no section in active tab id '+\n                            activeTabId + ' left - hiding it and following section to new tab nr '+tabnum);\n                        $(\"#tab\"+tabnum).click();\n                        $('#' + activeTabId).parent().hide();\n                    }\n                }\n            });};\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // Moving section0 to the ontop area\n            var moveOntop = function() { $(\".ontop_mover\").on('click', function() {\n                var currenttab = $('.tablink.active');\n                $(\"#ontop_area\").append($(this).closest('.section'));\n                $(\"#ontop_area\").addClass('section0_ontop');\n                currenttab.click();\n            });};\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // Moving section0 back into line with others\n            var moveInline = function() { $(\".inline_mover\").on('click', function() {\n                var sectionid = $(this).closest('.section').attr('section-id');\n                $(\"#inline_area\").append($(this).closest('.section'));\n                $('#section-0').show();\n                $('#ontop_spacer').hide();\n                // Remove the 'section0_ontop' class\n                $('.section0_ontop').removeClass('section0_ontop');\n                // Find the former tab for section0 if any and click it\n                $(\".tablink\").each(function() {\n                    if ($(this).attr('sections').indexOf(sectionid) > -1) {\n                        $('.tablink').click();\n                        $(this).click();\n                        return false;\n                    }\n                });\n            });};\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // A section edit menu is clicked\n            // hide the the current tab from the tab move options of the section edit menu\n            // if this is section0 do some extra stuff\n            var dropdownToggle = function() { $(\".menubar\").on('click', function() {\n                if ($(this).parent().parent().hasClass('section_action_menu')) {\n                    var sectionid = $(this).closest('.section').attr('id');\n                    $('#' + sectionid + ' .tab_mover').show(); // 1st show all options\n                    // replace all tabnames with the current names shown in tabs\n                    // Get the current tab names\n                    var tabArray = [];\n                    var trackIds = []; // tracking the tab IDs so to use each only once\n                    $('.tablink').each(function() {\n                        if (typeof $(this).attr('id') !== 'undefined') {\n                            var tabname = '';\n                            var tabid = $(this).attr('id').substr(3);\n                            if ($(this).hasClass('tabsectionname')) {\n                                tabname = $(this).html();\n                            } else {\n                                tabname = $(this).find('.inplaceeditable').attr('data-value');\n                            }\n                            if ($.inArray(tabid,trackIds) < 0) {\n                                if ($(this).hasClass('hidden-tab')) { // If this is a hidden tab remove all garnish from the name\n                                    tabname = $(this).find('a').clone();\n                                    tabname.find('span.quickediticon').remove();\n                                    tabname = $.trim(tabname.html());\n                                }\n                                tabArray[tabid] = tabname;\n                                trackIds.push(tabid);\n                            }\n                        }\n                    });\n\n                    // Updating menu options with current tab names\n                    // X console.log('--> Updating menu options with current tab names');\n                    $(this).parent().find('.tab_mover').each(function() {\n                        var tabnr = $(this).attr('tabnr');\n                        // X var tabtext = $(this).find('.menu-action-text').html();\n                        // X console.log(tabnr + ' --> ' + tabtext + ' ==> ' + tabArray[tabnr]);\n                        $(this).find('.menu-action-text').html('To Tab \"' + tabArray[tabnr] +\n                            ( (tabArray[tabnr] === 'Tab ' + tabnr || tabnr === '0') ? '\"' : '\" (Tab ' + tabnr + ')'));\n                    });\n\n                    if (sectionid === 'section-0') {\n                        if ($('#ontop_area.section0_ontop').length === 1) { // If section0 is on top don't show tab options\n                            $(\"#section-0 .inline_mover\").show();\n                            $(\"#section-0 .tab_mover\").addClass('tab_mover_bak').removeClass('tab_mover').hide();\n                            $(\"#section-0 .ontop_mover\").hide();\n                        } else {\n                            $(\"#section-0 .inline_mover\").hide();\n                            $(\"#section-0 .tab_mover_bak\").addClass('tab_mover').removeClass('tab_mover_bak').show();\n                            $(\"#section-0 .ontop_mover\").show();\n                        }\n                    } else if (typeof $('.tablink.active').attr('id') !== 'undefined') {\n                        var tabnum = $('.tablink.active').attr('id').substring(3);\n                        $('#' + sectionid + ' .tab_mover[tabnr=\"' + tabnum+'\"]').hide(); // Then hide the one not needed\n                        // X console.log('hiding tab ' + tabnum + ' from edit menu for section '+sectionid);\n                    }\n                }\n            });};\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // a section edit menu is clicked - to hide or show a section to students\n            var toggleAvailiability = function() {\n                $(\".section-actions .menubar .action-menu-trigger .dropdown .dropdown-menu .dropdown-item\").on('click', function() {\n                    var activeTab = $('.tablink.active');\n                    var visibleSections = $('li.section:visible').length;\n                    var hiddenSections = $('li.section.hidden:visible').length;\n                    var visibleBlocks = $('#modulecontent').find('.block:visible');\n                    var visibleAssessmentInfo = $('#content_assessmentinformation_area:visible').length;\n\n                    if ($(this).find('.menu-action-text').html().indexOf(\"Hide\") >= 0) {\n                        if (activeTab.attr('id') != undefined\n                            && visibleSections <= hiddenSections + $('.section0_ontop').length + 1\n                            && visibleBlocks.length === 0\n                            && visibleAssessmentInfo === 0\n                        ) {\n                            showTabHint(activeTab);\n                        }\n                    }\n                    if ($(this).find('.menu-action-text').html().indexOf(\"Show\") >= 0) {\n                        if (activeTab.attr('id') != undefined) {\n                            hideTabHint(activeTab);\n                        }\n                    }\n                });};\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // Load all required functions\n            var initFunctions = function() {\n                set_numsections_cookie();\n                tabClick();\n                tabMove();\n                moveOntop();\n                moveInline();\n                dropdownToggle();\n                tabnav();\n                toggleAvailiability();\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // What to do if a tab has been dropped onto another\n            var handleTabDropEvent = function( event, ui ) {\n                var dragged_tab = ui.draggable.find('.topictab').first();\n                var target_tab = $(this).find('.topictab').first();\n                var dragged_tab_id = ui.draggable.find('.topictab').first().attr('id');\n                var target_tab_id = $(this).find('.topictab').first().attr('id');\n                console.log('The tab with ID \"' + dragged_tab_id + '\" was dropped onto tab with the ID \"' + target_tab_id + '\"');\n                // Swap both tabs\n                var zwischenspeicher = dragged_tab.parent().html();\n                dragged_tab.parent().html(target_tab.parent().html());\n                target_tab.parent().html(zwischenspeicher);\n\n                // Re-instantiate the just added DOM elements\n                initFunctions();\n\n                // Get the new tab sequence and write it back to format options\n                var tabSeq = '';\n                // Get the id of each tab according to their position (left to right)\n                $('.tablink').each(function() {\n                    var tabid = $(this).attr('id');\n                    if (tabid !== undefined) {\n                        if (tabSeq === '') {\n                            tabSeq = tabid;\n                        } else if (tabSeq.indexOf(tabid) === -1) {\n                            tabSeq = tabSeq.concat(',').concat(tabid);\n                        }\n                    }\n                });\n\n                // Get the first section id from the 1st visible tab - this will be used to determine the course ID\n                var sectionid = $('.topictab:visible').first().attr('sections').split(',')[0];\n                if (sectionid === 'block_assessment_information') {\n                    sectionid = $('.topictab:visible:eq(1)').attr('sections').split(',')[0];\n                }\n\n                // Finally call php to write the data\n                $.ajax({\n                    url: \"format/qmulweeks/ajax/update_tab_seq.php\",\n                    type: \"POST\",\n                    data: {'sectionid': sectionid, 'tab_seq': tabSeq},\n                    success: function(result) {\n                        console.log('the new tab sequence: ' + result);\n                    }});\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // Show all sections when the \"Module Content\" tab is clicked\n            $(\".modulecontentlink\").click(function() {\n                // hide the content of the assessment info block tab\n//                $('.assessment_info_block_content').hide();\n                $('#assessment_information_summary').hide();\n                $('#assessment_information_area').hide();\n                $(\"li.section\").show();\n                $(\"li.section.hiding\").addClass(\"hidden\");\n                $(\"li.section.hidden\").removeClass(\"hiding\");\n            });\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // A link to an URL is clicked - so check if there is a section ID in it and reveal the corresponding tab...\n            $(\"a\").click(function() {\n                if ($(this).attr('href') !== '#') {\n                    var sectionid = $(this).attr('href').split('#')[1];\n                    // If the link contains a section ID (e.g. is NOT undefined) click the corresponding tab\n                    if (typeof sectionid !== 'undefined') {\n                        var sectionnum = $('#'+sectionid).attr('section-id');\n                        // Find the tab in which the section is\n                        var foundIt = false;\n                        $('.tablink').each(function() {\n                            if ($(this).attr('sections').indexOf(sectionnum) > -1) {\n                                $(this).click();\n                                foundIt = true;\n                                return false;\n                            }\n                        });\n                        if (!foundIt) {\n                            $('#tab0').click();\n                        }\n                    }\n                }\n            });\n\n// ---------------------------------------------------------------------------------------------------------------------\n            $(document).ready(function() {\n                console.log('--------------------------------------');\n                console.log('Beginning document tab initialization');\n                initFunctions();\n\n                // Force to show the edit menu for section-0\n                $(\"#section-0 .right.side\").show();\n\n                // Make tabs draggable when in edit mode (the pencil class is present)\n                if ($('.tablink .fa-pencil').length > 0) {\n\n                    $('.topictab').parent().draggable({\n                        cursor: 'move',\n                        stack: '.qmultabitem', // Make sure the dragged tab is always on top of others\n//                        snap: '.qmultabitem',\n                        revert: true,\n                    });\n                    $('.topictab').parent().droppable({\n                        accept: '.qmultabitem',\n                        hoverClass: 'hovered',\n                        drop: handleTabDropEvent,\n                    });\n                }\n\n                // Check for courseid and tab cookies\n                // Only when the page is reloaded for the same course check for a tab cookie and delete it otherwise\n                var courseid = $('#courseid').attr('courseid');\n                var originCourseid = sessionStorage.getItem('courseid');\n                var tabid = null;\n                if(originCourseid !== null && originCourseid == courseid) {\n                    tabid = sessionStorage.getItem('tabid');\n                } else {\n                    sessionStorage.removeItem('courseid');\n                    sessionStorage.removeItem('tabid');\n                }\n\n                // Move the Assessment Information block when active\n                if ( $('.block_assessment_information').length > 0) {\n                    // move the block into it's area in the main region\n                    $('#assessment_information_area').append($('.block_assessment_information'));\n                    // If the AI block is the only one remove the 'has-blocks' class from the main region\n                    if ( $('.block').length === $('.block_assessment_information').length) {\n                        $('#region-main').removeClass('has-blocks');\n                    }\n                }\n\n                // Click all tabs once\n                $('#tab0').click();\n                $('.tablink:visible').click();\n\n                // if there is no visible tab show/click the module content tab\n                if ($(\".topictab:visible\").length === 0) {\n                    $('#tab0').hide();\n                    $(\".modulecontentlink\").show();\n                    $(\".modulecontentlink\").click();\n                } else {\n                    $(\".modulecontentlink\").hide();\n                    if(tabid !== null && tabid != 'tab0') {\n                        // if a 'numSections' cookie is set the changenumsections url has been clicked\n                        // while the particular tab was active and we have returned here\n                        // if the tabid is other than tab0 move the newly added sections to that tab\n\n                        // Get the number of sections before new ones were added from another cookie\n                        var numSections = sessionStorage.getItem('numSections');\n                        sessionStorage.removeItem('numSections');\n                        if(numSections !== null) {\n                            // Attach all new sections to the given tab\n                            var tabnum = tabid.substring(3); // This is the tab number(!) where the section is moved to\n                            var i = 0;\n                            $('.section.main').each(function(){\n                                i = i + 1;\n                                if (i > numSections) {\n                                    // X console.log('new section id = ' + $(this).attr('id'));\n                                    var sectionid = $(this).attr('section-id');\n                                    var sectionnum = $(this).attr('id').substring(8);\n                                    add2tab(tabnum, sectionid, sectionnum);\n                                }\n                            });\n                            save2tab(tabid);\n                        }\n\n                        // Click the tab with the found tab ID\n                        $('#' + tabid).click();\n                    } else {\n                        // Click the 1st visible tab by default\n                        $('.tablink:visible').first().click();\n                    }\n                }\n\n                // if section0 is on top restrict section menu - restore otherwise\n                if ($(\"#ontop_area\").hasClass('section0_ontop')) {\n                    $(\"#section-0 .inline_mover\").show();\n                    $(\"#section-0 .tab_mover\").hide();\n                    $(\"#section-0 .ontop_mover\").hide();\n                } else {\n                    $(\"#section-0 .inline_mover\").hide();\n                    $(\"#section-0 .tab_mover\").show();\n                    $(\"#section-0 .ontop_mover\").show();\n                }\n            });\n        }\n    };\n});\n"],"file":"tabs.min.js"}